---
layout: post
title:  "iOSの勉強をやり直す"
date:   2014-06-17 02:00:00
categories: ios 
---

1年前に買ったまま、ちょっとしたアプリを作ったり mixi さんのアレをやったくらいで終わった僕の iOS 知識を基礎の基礎から再び満たすために下記の写経をするのです。

[プロの力を身につける iPhone/iPadアプリケーション開発の教科書](http://www.amazon.co.jp/dp/4797367180)

今更 Objective-C かよプゲラｗｗｗｗって言われそうだが結局 Swift でもなんでも Cocoa の上で動いてるのは変わりないと思うので、まぁやっててそんはないんじゃないでしょうか。既存のモノ含め全部がいきなり Swift で動くわけじゃないだろうし。

あと、俺的にどうでもいいっていうか雑学レベルの項目は飛ばしていくのでそこんとこよろしくな。あと、多分初歩的なことだけ書いて終わりにするからそこんとこもよろしくな。

## Objective-C 入門

### 1-1-3 基本構文 (P.20)

C と一緒。以上。


### 1-1-4 クラスやライブラリのインポート (P.21)

C の include を拡張した import を使う。

```
#import <Foundation/NSObject.h>
#import "MyViewController.h"
```

クラス名のみ使いたい場合(ヘッダファイルなどで実装がいらない時)は @class 構文で使用する ClassName を宣言できる。

```
@class MyClassName
```


### 1-1-5 クラスの宣言 (P.21)

クラスの宣言はヘッダファイルに記述する。 @interface と @end の間には、プロパティ宣言とメソッド宣言を記述できる。

```
@interface ClassName : ParentClassName

// プロパティ宣言

// メソッド宣言

@end
```

**注意**

- 多重継承ができない
- クラス変数の宣言はできない



### 1-1-6 ルートクラス (P.22)

NSObject 。何でもかんでも NSObject 。ミミズだってオケラだって、アメンボだって　NSObject 。

クラス宣言時に親クラスの指定を忘れるとオブジェクトが生成できないので注意。



### 1-1-7 メソッド宣言 (P.22)

#### 基本的な宣言のやり方

```
//// 基本
- (戻り値の型)メソッド名

//// インスタンスメソッドとクラスメソッド
// インスタンスメソッドは "-" で宣言
- (int)doSomething
// クラスメソッドは "+" で宣言
+ (int)doSomething

//// 引数有りのメソッド
- (戻り値の型)メソッド名:(引数の型)引数名
// 複数の引数を持つ場合はラベル名を指定する
- (戻り値の型)メソッド名:(引数の型)引数名 ラベル:(引数の型)引数名 ラベル:(引数の型)引数名
```

#### コンストラクタの宣言

Objective-C にはコンストラクタのための機能はないため `init` で始まるメソッドを使用するのがイディオム。また、戻り値は必ず `id` 型となる。

NSObject にはデフォルトコンストラクタのための init メソッドが実装されているため、 init の宣言を省略することができる。


#### メソッドのスコープ

Objective-C にはメソッドのスコープを指定するための機能が無い。そのため、ヘッダファイルに宣言されたメソッドは全て public メソッドとなる。 private なメソッドを宣言する場合は、ヘッダファイルではなく実装だいるにメソッドを宣言し、擬似的に private なメソッドとすることがイディオムとなっている。


### 1-1-8 プロパティ (P.24)

Objective-C はプロパティというインスタンス変数を外部に公開するための仕組みが用意されている。プロパティは getter, setter のアクセサを自動生成し、インスタンス変数として利用するために "_" を接頭辞とした名前を自動で宣言する。

```
@interface Hoge : NSObject

// プロパティの宣言
@property (nonatomic, strong) NSString *value;

@end
```

@property 構文のあとの括弧内はオプションとなっており、下記が設定できる。

- オブジェクト参照:
    - `strong`:  オブジェクトを強い参照で保持する
    - `weak`: オブジェクトを弱い参照で保持する

    デフォルトは `strong`
- スレッドセーフ
    - `atomic`: スレッドセーフにする
    - `nonatomic`: スレッドセーフにしない

    デフォルトは `atomic`
- アクセサ指定
    - `readonly`: 読み取り専用にする (setter メソッドを生成しない)
    - `readwrite`: 読み書きできる

    デフォルトは `readwrite`


### 1-1-9 クラス宣言の例 (P.25)

ここまでの内容をまとめると

```
@interface Point : NSObject

// プロパティ宣言
@property (nonatomic) int value;
// クラスメソッド宣言
+ (id)pointWithX: (int)x withY:(int)y;
// コンストラクタ宣言
- (id)initWithX: (int)x withY:(int)y;
// メソッド宣言
- (int)add: (int)num1 withNum:(int)num2
```

何か、本だとクラスメソッド宣言とコンストラクタ宣言のところが withY(int)y ってなってたけど間違いなのかな…？間違いだよね…？


### 1-1-10 クラス型変数の定義 (P.25)

クラスのメソッドや関数の中で暮らす型の変数を定義するには以下の2つの方法がある

- クラスの方を明示的に指定する方法
- id 型を使用する方法

```
// クラスを明示的に指定する
NSString *hoge1;
NSArray *piyo1;
// id 型を使用する方法
id hoge2;
id piyo2;
```

クラスの方を明示的に指定する場合は、変数をポインタ変数として定義すること。


### 1-1-11 文字列 (P.26)

Objective-C の文字列は NSString クラスのオブジェクトとして扱われる。ダブルクォーテーションで囲み、先頭に @ を付ける。

```
NSString *hoge = @"!!!!!!!! hell world !!!!!!!!";
```


### 1-1-12 メソッドの呼び方 (P.26)

Objective-C でオブジェクトのメソッドを呼び出す場合は、オブジェクトとメソッドを [, ] で囲む。

```
// 引数無しのメソッド
[オブジェクト メソッド]
// 引数有りのメソッド
[オブジェクト メソッド:引数];
[オブジェクト メソッド:引数 ラベル:引数];
```


### 1-1-13 プロパティへのアクセス (P.27)

"." です。


### 1-1-14 self (P.28)

インスタンスメソッド内で実行中のオブジェクトを表すのは `self`


### 1-1-15 super (P.28)

親クラスに定義されてるメソッドやインスタンス変数、プロパティにアクセスする場合は `super`

--------------------------------

眠いのでここまで @ 2014/06/17 02:00
